# Ticket Management System

ä¸€ä¸ªåŸºäºSpring Boot + Vue 3çš„ç°ä»£åŒ–å·¥å•ç®¡ç†ç³»ç»Ÿï¼Œæ¼”ç¤ºå®Œæ•´çš„DevOpså’ŒCI/CDæµç¨‹ã€‚

[![CI Pipeline](https://github.com/uniquejava/play-cicd001/actions/workflows/ci.yml/badge.svg)](https://github.com/uniquejava/play-cicd001/actions/workflows/ci.yml)


![screenshot](./docs/screenshot.jpg)

## ğŸ¯ é¡¹ç›®æ¦‚è§ˆ

è¿™æ˜¯ä¸€ä¸ª**å‰åç«¯åˆ†ç¦»çš„å¾®æœåŠ¡æ¶æ„**é¡¹ç›®ï¼Œå±•ç¤ºäº†ä»å¼€å‘åˆ°ç”Ÿäº§çš„å®Œæ•´DevOpså®è·µï¼š

- ğŸ—ï¸ **ç°ä»£åŒ–æ¶æ„**: Spring Boot 3.5.6 + Vue 3 + TypeScript
- ğŸš€ **å®¹å™¨åŒ–éƒ¨ç½²**: Docker + Kubernetes + EKS
- ğŸ”„ **CI/CDæµæ°´çº¿**: GitHub Actions + Kubernetes + ArgoCD
- ğŸ“Š **å¯è§‚æµ‹æ€§**: æ—¥å¿—ç›‘æ§ + å¥åº·æ£€æŸ¥
- ğŸ›¡ï¸ **å®‰å…¨æœ€ä½³å®è·µ**: æœ€å°æƒé™åŸåˆ™ + å®‰å…¨æ‰«æ

## âš¡ å¿«é€Ÿå¼€å§‹

### ğŸ“‹ å‰ç½®è¦æ±‚

- **AWS CLI**: å·²é…ç½®å‡­è¯
- **kubectl**: Kuberneteså‘½ä»¤è¡Œå·¥å…·
- **Terraform**: åŸºç¡€è®¾æ–½å³ä»£ç å·¥å…·
- **Docker**: å®¹å™¨åŒ–å·¥å…·
- **Helm**: KubernetesåŒ…ç®¡ç†å™¨

### ğŸš€ ä¸€é”®éƒ¨ç½²

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd play-cicd001

# å®Œæ•´éƒ¨ç½²ï¼ˆåŸºç¡€è®¾æ–½ + åº”ç”¨ï¼‰
./scripts/deploy.sh

# è®¿é—®åº”ç”¨
# å‰ç«¯: http://<è´Ÿè½½å‡è¡¡å™¨åœ°å€>/
# åç«¯API: http://<è´Ÿè½½å‡è¡¡å™¨åœ°å€>/api/tickets
```

### ğŸ”§ æœ¬åœ°å¼€å‘

```bash
# å¯åŠ¨åç«¯ (ç«¯å£: 8080)
cd backend
mvn spring-boot:run

# å¯åŠ¨å‰ç«¯ (ç«¯å£: 5173)
cd frontend
pnpm install && pnpm dev
```

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æŠ€æœ¯æ ˆ

**åç«¯ (Spring Boot)**
- Java 17 + Spring Boot 3.5.6
- Mavenæ„å»ºå·¥å…·
- RESTful APIè®¾è®¡
- å†…å­˜æ•°æ®å­˜å‚¨ï¼ˆæ¼”ç¤ºç”¨ï¼‰
- å¥åº·æ£€æŸ¥ç«¯ç‚¹

**å‰ç«¯ (Vue 3)**
- Vue 3 + Composition API + TypeScript
- Vite 7.1.7 + pnpm
- å“åº”å¼UIè®¾è®¡
- APIæœåŠ¡å°è£…

**åŸºç¡€è®¾æ–½ (AWS)**
- Amazon EKS 1.32 (Kubernetes)
- 2x t3.medium å·¥ä½œèŠ‚ç‚¹
- Application Load Balancer
- Amazon ECR (å®¹å™¨é•œåƒä»“åº“)
- VPC + å­ç½‘ + å®‰å…¨ç»„

### éƒ¨ç½²æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ (Vue 3)   â”‚â”€â”€â”€â”€â”‚  NGINX Ingress   â”‚â”€â”€â”€â”€â”‚  Load Balancer  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  åç«¯ (Spring)   â”‚â”€â”€â”€â”€â”‚  K8s Services    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“š æ–‡æ¡£å¯¼èˆª

### ğŸš€ éƒ¨ç½²ç›¸å…³
- [**éƒ¨ç½²æŒ‡å—**](docs/deployment/DEPLOYMENT.md) - å®Œæ•´éƒ¨ç½²æµç¨‹
- [**EKSéƒ¨ç½²æŒ‡å—**](docs/deployment/EKS_DEPLOYMENT_GUIDE.md) - AWS EKSè¯¦ç»†æ­¥éª¤
- [**NGINXé…ç½®**](docs/deployment/nginx-setup.md) - Ingress Controllerè®¾ç½®
- [**CI/CDéªŒè¯**](docs/deployment/CICD_VERIFICATION.md) - æµç¨‹éªŒè¯æµ‹è¯•

### ğŸ—ï¸ åŸºç¡€è®¾æ–½
- [**åŸºç¡€è®¾æ–½æ–‡æ¡£**](docs/infrastructure/infra-README.md) - Terraformé…ç½®è¯´æ˜
- [**æœ¬åœ°å¼€å‘ç¯å¢ƒ**](docs/infrastructure/kind.md) - Kindé›†ç¾¤è®¾ç½®

### ğŸ“œ è‡ªåŠ¨åŒ–è„šæœ¬
- [**è„šæœ¬ä½¿ç”¨æŒ‡å—**](docs/scripts/README.md) - è‡ªåŠ¨åŒ–è„šæœ¬è¯´æ˜

### ğŸ“‹ é¡¹ç›®æ–‡æ¡£
- [**é¡¹ç›®è¯´æ˜**](docs/INSTRUCTION.md) - é¡¹ç›®èƒŒæ™¯å’Œæ¶æ„
- [**å‰ç«¯å¼€å‘æŒ‡å—**](docs/frontend-README.md) - Vue 3å¼€å‘è¯´æ˜
- [**é¡¹ç›®è®¡åˆ’**](docs/plan.md) - å¼€å‘é‡Œç¨‹ç¢‘

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ğŸ“ é¡¹ç›®ç»“æ„

```
play-cicd001/
â”œâ”€â”€ backend/                    # Spring Bootåç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/main/java/         # Javaæºä»£ç 
â”‚   â”œâ”€â”€ src/test/              # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ pom.xml               # Mavené…ç½®
â”‚   â””â”€â”€ Dockerfile            # å®¹å™¨åŒ–é…ç½®
â”œâ”€â”€ frontend/                  # Vue 3å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/                   # Vueæºä»£ç 
â”‚   â”œâ”€â”€ public/               # é™æ€èµ„æº
â”‚   â”œâ”€â”€ package.json          # å‰ç«¯ä¾èµ–
â”‚   â””â”€â”€ Dockerfile            # å®¹å™¨åŒ–é…ç½®
â”œâ”€â”€ cicd/                      # CI/CDé…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ docker/               # Dockeræ„å»ºé…ç½®
â”‚   â”œâ”€â”€ k8s/                  # Kuberneteséƒ¨ç½²æ–‡ä»¶
â”‚   â”œâ”€â”€ helm/                 # Helm Charts
â”‚   â””â”€â”€ github-actions/       # GitHub Actionså·¥ä½œæµ
â”œâ”€â”€ infra/                     # TerraformåŸºç¡€è®¾æ–½
â”‚   â”œâ”€â”€ modules/              # Terraformæ¨¡å—
â”‚   â”œâ”€â”€ main.tf               # ä¸»é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ variables.tf          # å˜é‡å®šä¹‰
â”œâ”€â”€ scripts/                   # è‡ªåŠ¨åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ deploy.sh             # ä¸€é”®éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ destroy.sh            # ä¸€é”®åˆ é™¤è„šæœ¬
â”‚   â””â”€â”€ docker/               # Dockeræ„å»ºè„šæœ¬
â”œâ”€â”€ docs/                      # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ CLAUDE.md                  # Claude Codeé…ç½®
```

### ğŸ”§ å¸¸ç”¨å‘½ä»¤

```bash
# === åº”ç”¨ç®¡ç† ===
# ä¸€é”®éƒ¨ç½²
./scripts/deploy.sh

# ä¸€é”®åˆ é™¤ï¼ˆèŠ‚çœè´¹ç”¨ï¼‰
./scripts/destroy.sh

# ä»…éƒ¨ç½²åº”ç”¨åˆ°ç°æœ‰é›†ç¾¤
./scripts/deploy.sh --skip-infra

# === åŸºç¡€è®¾æ–½ ===
# åˆå§‹åŒ–Terraform
cd infra && terraform init

# æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’
terraform plan

# åº”ç”¨åŸºç¡€è®¾æ–½
terraform apply

# åˆ é™¤åŸºç¡€è®¾æ–½
terraform destroy

# === Kubernetes ===
# æŸ¥çœ‹PodçŠ¶æ€
kubectl get pods -n ticket-dev

# æŸ¥çœ‹æœåŠ¡
kubectl get services -n ticket-dev

# æŸ¥çœ‹Ingress
kubectl get ingress -n ticket-dev

# === Dockeræ„å»º ===
# æ„å»ºå‰ç«¯é•œåƒ
./scripts/docker/build-frontend.sh production

# æ„å»ºåç«¯é•œåƒ
docker build -f cicd/docker/backend/Dockerfile -t ticket-backend ./backend
```

## ğŸ“Š æˆæœ¬ä¼°ç®—

| èµ„æº | æœˆè´¹ç”¨ | è¯´æ˜ |
|------|--------|------|
| EKSæ§åˆ¶å¹³é¢ | ~$73 | Kubernetesé›†ç¾¤ç®¡ç† |
| EC2å®ä¾‹ (2x t3.medium) | ~$60 | å·¥ä½œèŠ‚ç‚¹ |
| NATç½‘å…³ | ~$35 | ç§æœ‰å­ç½‘å‡ºç½‘å…³ |
| EIP | ~$3.65 | å¼¹æ€§IPåœ°å€ |
| æ•°æ®ä¼ è¾“ | ~$5-10 | æµé‡è´¹ç”¨ |
| **æ€»è®¡** | **~$170** | **é¢„ä¼°æœˆè´¹ç”¨** |

> ğŸ’¡ **è´¹ç”¨æ§åˆ¶**: ä½¿ç”¨å®Œæ¯•åè¯·è¿è¡Œ `./scripts/destroy.sh` æ¸…ç†èµ„æºä»¥é¿å…ä¸å¿…è¦çš„è´¹ç”¨ã€‚

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… **å·¥å•ç®¡ç†**: åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤å·¥å•
- âœ… **çŠ¶æ€è¿½è¸ª**: å¾…å¤„ç† â†’ å¤„ç†ä¸­ â†’ å·²å®Œæˆ
- âœ… **RESTful API**: æ ‡å‡†åŒ–APIæ¥å£
- âœ… **å“åº”å¼è®¾è®¡**: æ”¯æŒå¤šè®¾å¤‡è®¿é—®
- âœ… **å®æ—¶æ›´æ–°**: å‰åç«¯æ•°æ®åŒæ­¥

### æŠ€æœ¯ç‰¹æ€§
- âœ… **å®¹å™¨åŒ–**: Dockeré•œåƒæ„å»º
- âœ… **å¾®æœåŠ¡**: å‰åç«¯åˆ†ç¦»æ¶æ„
- âœ… **è´Ÿè½½å‡è¡¡**: NGINX Ingress Controller
- âœ… **å¥åº·æ£€æŸ¥**: æœåŠ¡çŠ¶æ€ç›‘æ§
- âœ… **è‡ªåŠ¨æ‰©ç¼©å®¹**: Kubernetes HPAï¼ˆå¯é…ç½®ï¼‰

## ğŸ”„ CI/CDæµæ°´çº¿

### å¼€å‘æµç¨‹
1. **ä»£ç æäº¤** â†’ GitHubä»“åº“
2. **è‡ªåŠ¨æ„å»º** â†’ GitHub Actions CI
3. **é•œåƒæ„å»º** â†’ Docker + ECRæ¨é€
4. **è‡ªåŠ¨éƒ¨ç½²** â†’ GitHub Actions CD
5. **æœåŠ¡å‘å¸ƒ** â†’ Kubernetesé›†ç¾¤

### åˆ†æ”¯ç­–ç•¥
- `main`: ç”Ÿäº§ç¯å¢ƒåˆ†æ”¯
- `develop`: å¼€å‘ç¯å¢ƒåˆ†æ”¯
- `feature/*`: åŠŸèƒ½å¼€å‘åˆ†æ”¯
- `hotfix/*`: ç´§æ€¥ä¿®å¤åˆ†æ”¯

## ğŸ§ª æµ‹è¯•

```bash
# åç«¯æµ‹è¯•
cd backend && mvn test

# å‰ç«¯æµ‹è¯•
cd frontend && pnpm test

# APIæµ‹è¯•
curl http://localhost:8080/api/tickets
```

## ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§

- **æœ€å°æƒé™**: IAMè§’è‰²æƒé™æœ€å°åŒ–
- **ç½‘ç»œéš”ç¦»**: VPCç§æœ‰å­ç½‘éƒ¨ç½²
- **å®¹å™¨å®‰å…¨**: érootç”¨æˆ·è¿è¡Œ
- **é•œåƒæ‰«æ**: ECRè‡ªåŠ¨å®‰å…¨æ‰«æ
- **å¯†é’¥ç®¡ç†**: AWS Secrets Managerï¼ˆå¯æ‰©å±•ï¼‰

## ğŸ“ æ”¯æŒ

### ğŸ†˜ æ•…éšœæ’é™¤

**å¸¸è§é—®é¢˜**:
1. **æƒé™é”™è¯¯**: æ£€æŸ¥AWS IAMæƒé™
2. **ç½‘ç»œè¶…æ—¶**: æ£€æŸ¥å®‰å…¨ç»„é…ç½®
3. **éƒ¨ç½²å¤±è´¥**: æŸ¥çœ‹Podæ—¥å¿—: `kubectl logs -n ticket-dev deployment/backend-deployment`

### ğŸ“– æ›´å¤šèµ„æº

- [Vue 3 å®˜æ–¹æ–‡æ¡£](https://vuejs.org/)
- [Spring Boot æ–‡æ¡£](https://spring.io/projects/spring-boot)
- [Kubernetes æ–‡æ¡£](https://kubernetes.io/docs/)
- [AWS EKS æ–‡æ¡£](https://docs.aws.amazon.com/eks/)

### ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›é¡¹ç›®ã€‚

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

---

**âš ï¸ é‡è¦æé†’**: åœ¨ä¸ä½¿ç”¨é¡¹ç›®æ—¶ï¼Œè¯·è¿è¡Œ `./scripts/destroy.sh` åˆ é™¤æ‰€æœ‰AWSèµ„æºä»¥é¿å…äº§ç”Ÿè´¹ç”¨ï¼

**ğŸ“… æœ€åæ›´æ–°**: 2025-10-16